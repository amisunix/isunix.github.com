
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Steven's Blog</title>
  <meta name="author" content="Steven Sun">

  
  <meta name="description" content="In a file that have multiple “^M” characters in it , we can use vim to remove them. 1
:%s/^M//g the ^M character is made by typing ctrl + v first &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://isunix.github.io/blog/page/12">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Steven's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=Open+Sans:400,700&subset=latin" rel="stylesheet" type="text/css" />
<link href='http://fonts.googleapis.com/css?family=Noto+Serif:400,700' rel='stylesheet' type='text/css'>



  

</head>

<body    class="collapse-sidebar sidebar-footer" >
  <nav id="main-nav" role="navigation">
<ul class="main-navigation">
  <li><a href="/" class="nav-link">Blog</a></li>
  <li><a href="/blog/archives" class="nav-link">Archives</a></li>
  <li><a href="/atom.xml" class="nav-link">RSS</a></li>
  <li><a href="/about" class="nav-link">About</a></li>
</ul>

</nav>
  <header role="banner"><hgroup>
	
		<img src="/images/portrait.jpg" class="portrait" height=250px width=250px />
	
  <h1><a href="/">Steven's Blog</a></h1>
  
    <h2>A dream land of peace!</h2>
  
</hgroup>

</header> 
  
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/01/remove-the-m-chareacters-in-a-file/">Remove the ^M Chareacters in a File</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-01T13:45:23+08:00" pubdate data-updated="true">Jul 1<span>st</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In a file that have multiple “^M” characters in it , we can use vim to remove them.  </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="p">:</span><span class="nv">%s</span><span class="sr">/^M/</span><span class="o">/</span><span class="n">g</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>the ^M character is made by typing ctrl + v first then hit enter.   </p>

<p>Also I write a perl script to convert the from dos to unix and also delete chars in code followng the “//”.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="nb">open</span><span class="p">(</span><span class="nv">$IN</span><span class="p">,</span> <span class="s">&quot;$ARGV[0]&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">die</span> <span class="s">&quot;in: $@&quot;</span><span class="p">;</span>
</span><span class="line"><span class="nb">open</span><span class="p">(</span><span class="nv">$OUT</span><span class="p">,</span> <span class="s">&quot;&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;$ARGV[0].new&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">die</span> <span class="s">&quot;out: $@&quot;</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="k">while</span> <span class="p">(</span><span class="sr">&lt;$IN&gt;</span><span class="p">){</span>
</span><span class="line">    <span class="k">my</span> <span class="nv">$line</span> <span class="o">=</span> <span class="nv">$_</span><span class="p">;</span>
</span><span class="line">    <span class="nv">$line</span> <span class="o">=~</span> <span class="sr">s/(\/\/.*)//g</span><span class="p">;</span>
</span><span class="line">    <span class="k">print</span> <span class="nv">$OUT</span> <span class="nv">$line</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="nv">$command</span> <span class="o">=</span> <span class="s">&quot;mv $ARGV[0].new $ARGV[0] &amp;&amp; chmod 777 $ARGV[0] &amp;&amp; dos2unix $ARGV[0]&quot;</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="nb">system</span><span class="p">(</span><span class="nv">$command</span><span class="p">);</span>
</span><span class="line"><span class="k">print</span> <span class="s">&quot;successfully deleted and converted!\n&quot;</span><span class="p">;</span>
</span><span class="line"><span class="nb">close</span><span class="p">(</span><span class="nv">$IN</span><span class="p">);</span>
</span><span class="line"><span class="nb">close</span><span class="p">(</span><span class="nv">$OUT</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The code just explains itself.  </p>

<p>Bingo!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/30/ming-yan/">名言</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-30T21:58:31+08:00" pubdate data-updated="true">Jun 30<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>You see things, and you say why, but I dream things that never were, and I say why not.  </p>

<p>–Bernard Shaw  </p>

<p>To copy other is necessary，but to copy oneself is pathetic.   </p>

<p>–Pablo Picasso   </p>

<p>It’s nice to be there fighting, trying to go to the limit, bring your body to the limit of his chances,” Nadal said. “Something I really enjoy, and I always said is good to enjoy suffering, no?  So when you are fit, with passion for the game, when you are ready to compete, you are able to suffer and enjoy suffering.  So today I had this feeling, and is a really good one.  I suffered during the match, but I enjoyed all the troubles that I had during the match.  I tried to be there, to find solutions all the time.  I played a lot with my heart.  I played a lot with my mind, and is something that is nice to be around and not just play tennis.   </p>

<p>–Nadal  </p>

<p>作为一个初学者或者进阶者，这并没有什么错。当一个有能力的程序员而不是领导者，这也没有什么错。真正的错误是，当你知道应该如何去提高时仍然选择做一名初学者.   </p>

<p>–代码大全</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/27/beginning-python-study-notes/">Beginning Python Study Notes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-27T16:15:19+08:00" pubdate data-updated="true">Jun 27<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><ol>
  <li>input会假设用户的输入是合法的python表达式，而raw_input则不做这样的要求的。  </li>
  <li>在python中列表可以修改， 而元组则不能；会使用改变列表的常用method。   </li>
  <li>一般使用元组作为字典的建， 这种情况下，因为键不可修改，所以就不能够使用列表了。  </li>
  <li>列表的各个元素通过逗号分隔， 写在方括号中。   </li>
  <li>如果分片所得部包括序列结尾的元素， 那么，只需置空最后一个索引即可， 如numbers[-3:], 同样的方法也可以用于序列的开始的元素的。numbers[:3], 如果需要复制整个的序列，可以将两个索引都置空的: numbers[:]   </li>
  <li>pop方法是唯一一既能修改列表又返回元素值的列表方法(除了None)。</li>
  <li>（42，）这是只有一个元素的元组。  </li>
  <li>strip方法返回去除两侧(不包括内部)空格的字符串；</li>
  <li>字典中的值并没有特殊的顺序，但是都存储在一个特定的键里， 键可以是数字， 字符串， 甚至是元组。  </li>
  <li>range函数包含下限， 但是不包含上限。   </li>
  <li>break会跳出循环， 而continue会结束当前的迭代然后跳到下一轮循环的开始的。  </li>
  <li>想要什么事情都不做， 使用pass就可以了。</li>
  <li>执行一个字符串的语句是exec， 如， exec “print ”hello world“   </li>
  <li>eval会计算python表达式， 并且返回结果值。  </li>
  <li>并非所有的python函数都是有返回值的。</li>
  <li>get used to “try except else clause”.</li>
  <li>try finally, finally 可以在可能的异常后面进行清理。   </li>
  <li>sys这个模块能够让你访问与python解释器联系紧密的变量还有函数。</li>
  <li>os模块为你提供了多个访问操作系统服务的功能。  </li>
  <li>关注fileinput这个模块。   </li>
  <li>关注time模块。</li>
  <li>关注re模块。</li>
  <li>re.compile将正则表达式(以字符串书写的)转换为模式对象，可以实现更有效率的匹配。  </li>
  <li>关注getopt还有optparse这两个模块。  </li>
  <li>dir(obj)会返回按字母顺序排序的属性名称列表。  </li>
  <li>help(obj)会提供交互式帮助或者关于特定对象的交互帮助信息。   </li>
  <li>python的open函数的第三个参数控制着文件的缓冲， 如果参数是0， I/O就是无缓冲的， 如果是1， I/O就是有缓冲的, 这就意味着python使用内存来代替硬盘， 让程序更快， 是有使用flush或者close的时候才会更新硬盘上的数据。大于1的数据代表缓冲区的大小，-1代表使用默认的缓冲区的大小。  </li>
  <li>关注urllib还有urllib2模块。   </li>
  <li>关注HTMLParser模块。  </li>
  <li>关注模块BeautifulSoup4</li>
</ol>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/24/python-algorithms/">Python Algorithms</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-24T15:23:46+08:00" pubdate data-updated="true">Jun 24<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>1.To test the time we used while execting something, we can issue the following command: </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">timeit</span> <span class="o">-</span><span class="n">s</span><span class="s">&quot;import mymodule as m&quot;</span> <span class="s">&quot;m.myfunction()&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>or separately: </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="kn">import</span> <span class="nn">timeit</span>
</span><span class="line"><span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s">&quot;x = 2 + 2&quot;</span><span class="p">)</span>
</span><span class="line">	
</span></code></pre></td></tr></table></div></figure></notextile></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/22/sort-in-perl/">Sort in Perl</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-22T12:31:50+08:00" pubdate data-updated="true">Jun 22<span>nd</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In Perl, function sort() sort the item of an array according to its corresponding acssci code. for example, if we have an array @array = (1, 3, 10, 2, 21) and use sort against this array, we will get the following result: 1 10 2 21 3. However if we want to sort these numbers according to its value, we can use the following method:   </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="nb">sort</span><span class="p">{</span><span class="nv">$a</span> <span class="sr">&lt;=&gt;</span> <span class="nv">$b</span><span class="p">}</span> <span class="nv">@array</span><span class="p">;</span>   <span class="c1">#ascending</span>
</span><span class="line">
</span><span class="line"><span class="nb">sort</span><span class="p">{</span><span class="nv">$b</span> <span class="sr">&lt;=&gt;</span> <span class="nv">$a</span><span class="p">}</span> <span class="nv">@array</span><span class="p">;</span>   <span class="c1">#descending</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/19/linux-shell-scripting-cookbook-2nd-notes/">Linux Shell Scripting Cookbook 2nd Notes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-19T09:39:37+08:00" pubdate data-updated="true">Jun 19<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><ol>
  <li>get the length of a variable:   </li>
</ol>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">length</span><span class="o">=</span><span class="k">${#</span><span class="nv">var</span><span class="k">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<ol>
  <li>arguments:   </li>
</ol>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$1</span> is the first argument
</span><span class="line"><span class="nv">$2</span> is the second argument
</span><span class="line"><span class="nv">$n</span> is the nth argument
</span><span class="line"><span class="s2">&quot;$@&quot;</span>expands as <span class="s2">&quot;$1&quot;</span> <span class="s2">&quot;$2&quot;</span> <span class="s2">&quot;$3&quot;</span> and so on
</span><span class="line"><span class="s2">&quot;$*&quot;</span> expands as <span class="s2">&quot;$1c$2c$3&quot;</span>, where c is the first character of IFS
</span><span class="line"><span class="s2">&quot;$@&quot;</span> is used more often than <span class="s2">&quot;$*&quot;</span>since the former provides all arguments as a single string
</span></code></pre></td></tr></table></div></figure></notextile></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/16/practical-vim-notes/">Practical Vim Notes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-16T00:24:14+08:00" pubdate data-updated="true">Jun 16<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>接触VIM的日子已经颇长了， 自己现在的VIM的配置已经是非常的强大了，可惜是clone别人的。 只是在一些配置上稍稍做了些改动, 然后添加了一些自己喜欢的package。使用VIM的技艺还是得经常磨练的， 要不然很快就会手生还有遗忘的。 这片文章记录自己再学习«Practical VIM»这本书的时候做的一些笔记， 这些都是自己估计会在coding的时候经常遇到的， 记录下来可以经常查阅。</p>

<h2 id="read-the-forgotten-manual">Read the Forgotten Manual</h2>

<ol>
  <li>
    <p>The Normal mode cw command deletes to the end of the current word and switches to Insert mode.  </p>
  </li>
  <li>
    <p>如果有这么一段：        </p>
  </li>
</ol>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://pragprog.com/dnvim/&quot;</span><span class="nt">&gt;</span>Practical Vim<span class="nt">&lt;/a&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>在normal模式下， 按下vit会选择Practical Vim。</p>

<h2 id="chapter-1--the-vim-way">Chapter 1–The Vim Way</h2>

<ol>
  <li>
    <p>The dot command lets us repeat the last change.   </p>
  </li>
  <li>
    <p>Press A in normal mode will put the cursor at the end of a file and go into insert mode.</p>
  </li>
  <li>
    <p>The s command compounds two steps into one: it deletes the character under the cursor and then enters Insert mode.</p>
  </li>
  <li>
    <p>The f{char} command tells Vim to look ahead for the next occurrence of the specified character and then move the cursor directly to it if a match is found.</p>
  </li>
  <li>
    <p>By pressing the , key, it will repeat the last f{char} search in the reverse direction</p>
  </li>
  <li>
    <p>The * command will executes a search for the word under the cursor at that moment.    </p>
  </li>
</ol>

<h2 id="chapter-2--normal-mode">Chapter 2–Normal Mode</h2>

<ol>
  <li>
    <p>Pressing db deletes from the cursor’s starting position to the beginning of the word.</p>
  </li>
  <li>
    <p>Pressing b will go to the beginning of a word backwordly, while w will do it forwardly.</p>
  </li>
  <li>
    <p>The daw command is easily remembered by the mnemonic delete a word.  </p>
  </li>
  <li>
    <p>The <c-a> and <c-x> commands perform addition and subtraction on numbers.  </c-x></c-a></p>
  </li>
  <li>
    <p>yyp will copy the current line and paste it to the next line.</p>
  </li>
  <li>
    <p>c3w will change 3 words after the cursor. </p>
  </li>
  <li>
    <p>The d{motion} command can operate on a single character ( dl), a complete word ( daw), or an entire paragraph ( dap). Its reach is defined by the motion. The same goes for c{motion}, y{motion}, and a handful of others. Collectively, these commands are called operators. You can find the complete list by looking up :h operator</p>
  </li>
  <li>
    <p>&gt; will shilt right, = will do auto-indent;</p>
  </li>
  <li>
    <p>&#92;&#92;\ will comment the current line.  (I tested&#92;\ will be enough.)</p>
  </li>
  <li>
    <p>If we wanted to autoindent the entire file using the = command, we could run gg=G (that is, gg to jump to the top of the file and then =G to autoindent everything from the cursor position to the end of the file). </p>
  </li>
</ol>

<h2 id="chapter-3--insert-mode">Chapter 3–Insert Mode</h2>

<ol>
  <li>
    <p>In insert mode, <c-h> Delete back one character (backspace), <c-w> Delete back one word, <c-u> Delete back to start of line.   </c-u></c-w></c-h></p>
  </li>
  <li>
    <p>In normal node, yt{char} will copy till the char(not including).   </p>
  </li>
  <li>
    <p>From Normal mode, we can engage Replace mode with the R command.   </p>
  </li>
</ol>

<h2 id="chapter-4--visual-mode">Chapter 4–Visual Mode</h2>

<ol>
  <li>
    <c-v> Enable block-wise Visual mode, gv Reselect the last visual selection, o Go to other end of highlighted text.

</c-v>
  </li>
  <li>
    <p>gU{motion} will make {motion} text uppercase. (In visual mode).</p>
  </li>
  <li>
    <p>In normal mode, vit, which can be read as: visually select inside the tag. </p>
  </li>
  <li>e in normal mode will forward to the end of word (inclusively).   </li>
</ol>

<p>For more about how to use visual mode to append and substitute text, please refer to the book.</p>

<h2 id="chapter-5--command-line-mode">Chapter 5–Command-Line Mode</h2>

<p>基本上跳过了这一章， 只学会：</p>

<ol>
  <li>
    <p>:%s///g;来进行替换。</p>
  </li>
  <li>
    <p>Note the difference between :!ls and :ls—the former calls the ls command in the shell, whereas :ls calls Vim’s built-in command, which shows the contents of the buffer list.</p>
  </li>
  <li>
    <p>On Vim’s command line, the % symbol is shorthand for the current file name. So :!ruby % will run the current file.</p>
  </li>
</ol>

<h2 id="chapter-6--manage-multiple-files">Chapter 6–Manage Multiple Files</h2>

<ol>
  <li>
    <p>In vim, we’re editing an in-memory representation of a file, which is called a buffer in Vim’s terminology. Files are stored on the disk, whereas buffers exist in memory. When we open a file in Vim, its contents are read into a buffer, which takes the same name as the file. Initially, the contents of the buffer will be identical to those of the file, but the two will diverge as we make changes to the buffer. If we decide that we want to keep our changes, we can write the contents of the buffer back into the file.   </p>
  </li>
  <li>
    <p>We can divide this window horizontally with the <c-w>s command, which creates two windows of equal height. Or we can use the <c-w>v command to split the window vertically, producing two windows of equal width.</c-w></c-w></p>
  </li>
  <li>
    <c-w>c Close the active window, <c-w>o Keep only the active window, closing all others.  

</c-w></c-w>
  </li>
  <li>
    <c-w>= Equalize width and height of all windows, <c-w>_ Maximize height of the active window.   

</c-w></c-w>
  </li>
  <li>
    <p>Alternatively, if the current tab page contains more than one window, we can use the <c-w>T command, which moves the current window into a new tab page (see :h CTRL-W_T ).   </c-w></p>
  </li>
  <li>
    <p>:tabc[lose] Close the current tab page and all of its windows, :tabo[nly] Keep the active tab page, closing all others. </p>
  </li>
  <li>:tabn[ext], also gt Switch to the next tab page, :tabp[revious], also gT Switch to the previous tab page.</li>
</ol>

<h2 id="chapter-7--open-files-and-save-them-to-disk">Chapter 7–Open Files and Save Them to Disk</h2>

<p>Just skipped over this chapter.</p>

<h2 id="chapter-8--navigate-inside-files-with-motions">Chapter 8–Navigate Inside Files with Motions</h2>

<ol>
  <li>
    <p>ge Backward to end of previous word.</p>
  </li>
  <li>
    <p>Taken together, the ea commands can be read as “Append at the end of the current word” . The gea command can be read as “append at the end of the previous word”.</p>
  </li>
  <li>
    <p>Vim keeps track of the most recent f{char} search, and we can repeat it using the ; command.</p>
  </li>
  <li>
    <p>The , command repeats the last f{char} search but in the opposite direction.</p>
  </li>
  <li>
    <p>t{char} Forward to the character before the next occurrence of {char}, T{char} Backward to the character after the previous occurrence of {char}.</p>
  </li>
  <li>
    <p>dt. will delete till . </p>
  </li>
  <li>
    <p>We can read the ci” command as “change inside the double quotes.” The cit command can be read as “change inside the tag.” We could just as easily use the yit command to yank the text from inside the tag, or dit to delete it.</p>
  </li>
  <li>
    <p>Keystrokes Buffer Contents      </p>
  </li>
</ol>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="html"><span class="line">iw         Current word
</span><span class="line">aw         Current word plus one space
</span><span class="line">iW         Current WORD
</span><span class="line">aW         Current WORD plus one space
</span><span class="line">is         Current sentence
</span><span class="line">as         Current sentence plus one space
</span><span class="line">ip         Current paragraph
</span><span class="line">ap         Current paragraph plus one blank line
</span></code></pre></td></tr></table></div></figure></notextile></div>

<ol>
  <li>
    <p>As a general rule, we could say that the d{motion} command tends to work well with aw, as, and ap, whereas the c{motion} command works better with iw and similar.  </p>
  </li>
  <li>
    <p>Learn more about surround.vim;</p>
  </li>
</ol>

<h2 id="chapter-9--navigate-between-files-with-jumps">Chapter 9–Navigate Between Files with Jumps</h2>

<ol>
  <li>gf command means go to file (:h gf ).</li>
</ol>

<h2 id="chapter-10--copy-and-paste">Chapter 10–Copy and Paste</h2>

<ol>
  <li>
    <p>The p command pastes the contents of the unnamed register after the cursor position.</p>
  </li>
  <li>
    <p>Taken together, the xp commands can be considered as “Transpose the next two characters.”</p>
  </li>
  <li>
    <p>The ddp sequence could be considered to stand for “Transpose the order of this line and its successor.”</p>
  </li>
  <li>
    <p>Rather than using a single clipboard for all cut, copy, and paste operations, Vim provides multiple registers. When we use the delete, yank, and put commands, we can specify which register we want to interact with.</p>
  </li>
  <li>
    <p>We can specify which register we want to use by prefixing the command with “{register}. If we don’t specify a register, then Vim will use the unnamedregister.</p>
  </li>
  <li>
    <p>For example, if we wanted to yank the current word into register a, we could run “ayiw. Or if we wanted to cut the current line into register b, we could run “bdd. Then we could paste the word from register a by typing “ap, or we could paste the line from register b by typing “bp.</p>
  </li>
</ol>

<h2 id="chapter-11--macros">Chapter 11–Macros</h2>

<ol>
  <li>
    <p>Macros allow us to record a sequence of changes and then play them back.</p>
  </li>
  <li>
    <p>The q key functions both as the “record” button and the “stop” button. To begin recording our keystrokes, we type q{register}, giving the address of the register where we want to save the macro. We can tell that we’ve done it right if the word “recording” appears in the status line. Every command that we execute will be captured, right up until we press q again to stop recording.</p>
  </li>
  <li>
    <p>The @{register} command executes the contents of the specified register (see :h @ ). We can also use @@, which repeats the macro that was invoked most recently. </p>
  </li>
</ol>

<p>(I have to say I did not finish this chapter!)</p>

<h2 id="chapter-12--matching-patterns-and-literals">Chapter 12–Matching Patterns and Literals</h2>

<ol>
  <li>
    <p>We can override Vim’s default case sensitivity using the \c and \C items. Lowercase \c causes the search pattern to ignore case, while the uppercase \C item forces case sensitivity. If either of these items is used in a search pattern, the value of ‘ignorecase’ is overridden for that search.</p>
  </li>
  <li>
    <p>For using regex in vim, The \v switch at the start causes all subsequent characters to take on a special meaning.</p>
  </li>
</ol>

<p>Miscelleneous</p>

<ol>
  <li>
    <p>Tag navigation and tag autocompletion won’t work unless Vim knows where to look for an up-to-date index file.</p>
  </li>
  <li>
    <p>Command Type of Completion         </p>
  </li>
</ol>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;C</span><span class="na">-n</span><span class="nt">&gt;</span> Generic keywords
</span><span class="line">
</span><span class="line"><span class="nt">&lt;C</span><span class="na">-x</span><span class="nt">&gt;&lt;C</span><span class="na">-n</span><span class="nt">&gt;</span> Current buffer keywords
</span><span class="line">
</span><span class="line"><span class="nt">&lt;C</span><span class="na">-x</span><span class="nt">&gt;&lt;C</span><span class="na">-i</span><span class="nt">&gt;</span> Included file keywords
</span><span class="line">
</span><span class="line"><span class="nt">&lt;C</span><span class="na">-x</span><span class="nt">&gt;&lt;C</span><span class="na">-</span><span class="err">]</span><span class="nt">&gt;</span> tags file keywords
</span><span class="line">
</span><span class="line"><span class="nt">&lt;C</span><span class="na">-x</span><span class="nt">&gt;&lt;C</span><span class="na">-k</span><span class="nt">&gt;</span> Dictionary lookup
</span><span class="line">
</span><span class="line"><span class="nt">&lt;C</span><span class="na">-x</span><span class="nt">&gt;&lt;C</span><span class="na">-l</span><span class="nt">&gt;</span> Whole line completion
</span><span class="line">
</span><span class="line"><span class="nt">&lt;C</span><span class="na">-x</span><span class="nt">&gt;&lt;C</span><span class="na">-f</span><span class="nt">&gt;</span> Filename completion
</span><span class="line">
</span><span class="line"><span class="nt">&lt;C</span><span class="na">-x</span><span class="nt">&gt;&lt;C</span><span class="na">-o</span><span class="nt">&gt;</span> Omni-completion
</span></code></pre></td></tr></table></div></figure></notextile></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/16/dancer-introduction-notes/">Dancer::Introduction Notes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-16T00:05:17+08:00" pubdate data-updated="true">Jun 16<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>1.A route pattern can contain one or more tokens, and tokens can be optional.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="n">get</span> <span class="s">&#39;/hello/:name?&#39;</span> <span class="o">=&gt;</span> <span class="k">sub </span><span class="p">{</span>
</span><span class="line">    <span class="s">&quot;Hello there &quot;</span> <span class="o">.</span> <span class="p">(</span><span class="n">param</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s">&quot;whoever you are!&quot;</span><span class="p">);</span>
</span><span class="line"><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>2.A route can contain a wildcard (represented by a ‘*’). Each wildcard match will be returned in an arrayref, accessible via the `splat’ keyword:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="n">get</span> <span class="s">&#39;/download/*.*&#39;</span> <span class="o">=&gt;</span> <span class="k">sub </span><span class="p">{</span>
</span><span class="line">    <span class="k">my</span> <span class="p">(</span><span class="nv">$file</span><span class="p">,</span> <span class="nv">$ext</span><span class="p">)</span> <span class="o">=</span> <span class="n">splat</span><span class="p">;</span>
</span><span class="line">    <span class="c1"># do something with $file.$ext here</span>
</span><span class="line"><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>3.A route can be defined with a Perl regular expression. In order to tell Dancer to consider the route as a real regexp, the route must be defined explicitly with qr{}, like the following:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="n">get</span> <span class="sx">qr{/hello/([\w]+)}</span> <span class="o">=&gt;</span> <span class="k">sub </span><span class="p">{</span>
</span><span class="line">    <span class="k">my</span> <span class="p">(</span><span class="nv">$name</span><span class="p">)</span> <span class="o">=</span> <span class="n">splat</span><span class="p">;</span>
</span><span class="line">    <span class="k">return</span> <span class="s">&quot;Hello $name&quot;</span><span class="p">;</span>
</span><span class="line"><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>4.Routes may include some matching conditions (on the useragent and the hostname at the moment):     </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="n">get</span> <span class="s">&#39;/foo&#39;</span><span class="p">,</span> <span class="p">{</span><span class="n">agent</span> <span class="o">=&gt;</span> <span class="s">&#39;Songbird (\d\.\d)[\d\/]*?&#39;</span><span class="p">}</span> <span class="o">=&gt;</span> <span class="k">sub </span><span class="p">{</span>
</span><span class="line">  <span class="s">&#39;foo method for songbird&#39;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="n">get</span> <span class="s">&#39;/foo&#39;</span> <span class="o">=&gt;</span> <span class="k">sub </span><span class="p">{</span>
</span><span class="line">  <span class="s">&#39;all browsers except songbird&#39;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>5.An action can choose not to serve the current request and ask Dancer to process the request with the next matching route. This is done with the pass keyword, like in the following example:    </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="n">get</span> <span class="s">&#39;/say/:word&#39;</span> <span class="o">=&gt;</span> <span class="k">sub </span><span class="p">{</span>
</span><span class="line">    <span class="k">return</span> <span class="n">pass</span> <span class="k">if</span> <span class="p">(</span><span class="n">params</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">word</span><span class="p">}</span> <span class="o">=~</span><span class="sr"> /^\d+$/</span><span class="p">);</span>
</span><span class="line">    <span class="s">&quot;I say a word: &quot;</span><span class="o">.</span><span class="n">params</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">word</span><span class="p">};</span>
</span><span class="line"><span class="p">};</span>
</span><span class="line">
</span><span class="line"><span class="n">get</span> <span class="s">&#39;/say/:number&#39;</span> <span class="o">=&gt;</span> <span class="k">sub </span><span class="p">{</span>
</span><span class="line">    <span class="s">&quot;I say a number: &quot;</span><span class="o">.</span><span class="n">params</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">number</span><span class="p">};</span>
</span><span class="line"><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>6.Before hooks, after hooks, before_template_render hooks. </p>

<p>7.You can use the load method to include additional routes into your application.</p>

<p>8.A Dancer application can access the information from its config file easily with the config keyword:    </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="n">get</span> <span class="s">&#39;/appname&#39;</span> <span class="o">=&gt;</span> <span class="k">sub </span><span class="p">{</span>
</span><span class="line">    <span class="k">return</span> <span class="s">&quot;This is &quot;</span> <span class="o">.</span> <span class="n">config</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">appname</span><span class="p">};</span>
</span><span class="line"><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>9.In order to enable the logging system for your application, you first have to start the logger engine in your config.yml:   </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="n">logger:</span> <span class="s">&#39;file&#39;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>10.Dancer configures the Template::Toolkit engine to use &lt;% %&gt; brackets instead of its default [% %] brackets, although you can change this in your config file. Of course you have to import the “Template” module.  </p>

<p>11.A layout is a special view, located in the ‘layouts’ directory (inside the views directory) which must have a token named `content’. That token marks the place where to render the action view. This lets you define a global layout for your actions. Any tokens that you defined when you called the ‘template’ keyword are available in the layouts, as well as the standard session, request, and params tokens. This allows you to insert per-page content into the HTML boilerplate, such as page titles, current-page tags for navigation, etc. (refer to the standard document for more details).</p>

<p>12.Through  “set serializer =&gt; ‘JSON’;”  we can do data serializer;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/15/how-to-insert-pictures-in-octopress/">How to Insert Pictures in Octopress</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-15T23:14:54+08:00" pubdate data-updated="true">Jun 15<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Of course you can google about it, but I just keep it down so that every time I do it, I do not need to google again. It is pretty easy. </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="html"><span class="line">{\% img [class names] /path/to/image [width] [height] [title text [alt text]] \%}
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Of course you need to remove the “\” in the above line. I just it there so it will be interpreted as inserting a pic here. Sorry about this.</p>

<p>Just add your pics in the above format. Note here I add a subdir in the source/images/ dir.  </p>

<p>That is it. </p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/11/zhong-ji-perl-yin-yong-ru-men/">Intermediate Perl 第四章 引用入门</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-11T18:45:27+08:00" pubdate data-updated="true">Jun 11<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>引用是Perl的复杂的数据结构，面向对象编程还有花哨的子程序的基石。它们是在Perl4还有Perl5这段时间被添加进去的。    </p>

<p>一个Perl的标量变量存有一个单一的值。一个数组存有一个或者多个标量的有序列表。一个哈希存有一组标量作为值， 然后以另外一组值作为键。尽管一个标量可以是一个任意的字符串，那样就允许复杂的数据被嵌入到数组或者哈希里面去，但是上面的三种数据类型没有一种是很合适复杂的数据间的相互关系的。这就是引用的活了。让我们以一个例子开头看下引用的重要性。  </p>

<h2 id="section">在许多数组上面执行同样的任务</h2>

<p>在Minnow开始一个短途旅途的(例如，一个3小时的观光), 我们应该检查每一个乘客还有全体乘务人员来确保他们都拥有必备的旅行用品。比如说， 为了还上航行的安全，Minnow穿上的每个人都得有个救生圈，一些遮光剂，一个水壶还有一个雨衣。我们可以写一些代码来检查Skipper的储备。   </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">my</span> <span class="nv">@required</span> <span class="o">=</span> <span class="sx">qw(preserver sunscreen water_bottle jacket)</span><span class="p">;</span>
</span><span class="line"><span class="k">my</span> <span class="nv">@skipper</span> <span class="o">=</span> <span class="sx">qw(blue_shirt hat jacket preserver sunscreen)</span><span class="p">;</span>
</span><span class="line"><span class="k">for</span> <span class="k">my</span> <span class="nv">$item</span> <span class="p">(</span><span class="nv">@required</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">	<span class="k">unless</span> <span class="p">(</span><span class="nb">grep</span> <span class="nv">$item</span> <span class="ow">eq</span> <span class="nv">$_</span><span class="p">,</span> <span class="nv">@skipper</span><span class="p">)</span> <span class="p">{</span> <span class="c1"># not found in list?</span>
</span><span class="line">	<span class="k">print</span> <span class="s">&quot;skipper is missing $item.\n&quot;</span><span class="p">;</span>
</span><span class="line">	<span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>grep在标量上下文中返回表达式 $item eq $_ 返回 true 的次数，当这件东西在清单里的时候就是1，不在的话就是0. 如果值是0的话，就是假,这个时候我们就把信息给打印出来。   </p>

<p>当然如果我们想要检查Gilligan还有Professor的话，我们可能会写如下的代码:  </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">my</span> <span class="nv">@gilligan</span> <span class="o">=</span> <span class="sx">qw(red_shirt hat lucky_socks water_bottle)</span><span class="p">;</span>
</span><span class="line"><span class="k">for</span> <span class="k">my</span> <span class="nv">$item</span> <span class="p">(</span><span class="nv">@required</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">	<span class="k">unless</span> <span class="p">(</span><span class="nb">grep</span> <span class="nv">$item</span> <span class="ow">eq</span> <span class="nv">$_</span><span class="p">,</span> <span class="nv">@gilligan</span><span class="p">)</span> <span class="p">{</span> <span class="c1"># not found in list?</span>
</span><span class="line">	<span class="k">print</span> <span class="s">&quot;gilligan is missing $item.\n&quot;</span><span class="p">;</span>
</span><span class="line">	<span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="k">my</span> <span class="nv">@professor</span> <span class="o">=</span> <span class="sx">qw(sunscreen water_bottle slide_rule batteries radio)</span><span class="p">;</span>
</span><span class="line"><span class="k">for</span> <span class="k">my</span> <span class="nv">$item</span> <span class="p">(</span><span class="nv">@required</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">	<span class="k">unless</span> <span class="p">(</span><span class="nb">grep</span> <span class="nv">$item</span> <span class="ow">eq</span> <span class="nv">$_</span><span class="p">,</span> <span class="nv">@professor</span><span class="p">)</span> <span class="p">{</span> <span class="c1"># not found in list?</span>
</span><span class="line">	<span class="k">print</span> <span class="s">&quot;professor is missing $item.\n&quot;</span><span class="p">;</span>
</span><span class="line">	<span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>你可能开始注意到这里有很多的冗余的代码，并且想到我们应该把它重构到一个可以重用的通用的子程序中(你是正确的):   </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">sub </span><span class="nf">check_required_items</span> <span class="p">{</span>
</span><span class="line">	<span class="k">my</span> <span class="nv">$who</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class="line">	<span class="k">my</span> <span class="nv">@required</span> <span class="o">=</span> <span class="sx">qw(preserver sunscreen water_bottle jacket)</span><span class="p">;</span>
</span><span class="line">	<span class="k">for</span> <span class="k">my</span> <span class="nv">$item</span> <span class="p">(</span><span class="nv">@required</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">		<span class="k">unless</span> <span class="p">(</span><span class="nb">grep</span> <span class="nv">$item</span> <span class="ow">eq</span> <span class="nv">$_</span><span class="p">,</span> <span class="nv">@_</span><span class="p">)</span> <span class="p">{</span> <span class="c1"># not found in list?</span>
</span><span class="line">			<span class="k">print</span> <span class="s">&quot;$who is missing $item.\n&quot;</span><span class="p">;</span>
</span><span class="line">		<span class="p">}</span>
</span><span class="line">	<span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="k">my</span> <span class="nv">@gilligan</span> <span class="o">=</span> <span class="sx">qw(red_shirt hat lucky_socks water_bottle)</span><span class="p">;</span>
</span><span class="line"><span class="n">check_required_items</span><span class="p">(</span><span class="s">&#39;gilligan&#39;</span><span class="p">,</span> <span class="nv">@gilligan</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Perl一开始通过它的@_数组给了子程序5个条款：名字gilligan还有属于Gilligan的4个东西。在shift操作之后，@_就只有4个东西了。因此grep通过和清单比对来检查每个所必备的东西。   </p>

<p>到目前为止，一切都很好。我们可以同过一点多余的代码来检查Skipper还有Professor的：  </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">my</span> <span class="nv">@skipper</span> <span class="o">=</span> <span class="sx">qw(blue_shirt hat jacket preserver sunscreen)</span><span class="p">;</span>
</span><span class="line"><span class="k">my</span> <span class="nv">@professor</span> <span class="o">=</span> <span class="sx">qw(sunscreen water_bottle slide_rule batteries radio)</span><span class="p">;</span>
</span><span class="line"><span class="n">check_required_items</span><span class="p">(</span><span class="s">&#39;skipper&#39;</span><span class="p">,</span> <span class="nv">@skipper</span><span class="p">);</span>
</span><span class="line"><span class="n">check_required_items</span><span class="p">(</span><span class="s">&#39;professor&#39;</span><span class="p">,</span> <span class="nv">@professor</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>对于其他的乘客，我们在需要的地方重复下就行了。尽管这个代码符合一开始的要求，我们有两个问题得处理: </p>

<p>*为了创建@_, Perl把数组的整个内容都拷下下来扫描。对于一个元素的话这没什么问题，但是如果数组很大的话，把数据拷贝然后仅仅就是为了传给子程序的话就显得有点浪费了。   </p>

<p>*假如我们想要修改原先的数组来迫使供应清单包括一些必备的东西，因为我们在子程序中有一个副本(传值),对@_做的任何的修改都不会自动地反映到对应的供应清单数组中去。   </p>

<p>为了解决一个或者两个问题，我们需要的是引用传递而非值传递。这就是doctor(或者Professor)所要求的。  </p>

<h2 id="section-1">对一个数组做引用</h2>

<p>在反斜线()的很多的其他的意思当中，它还是”对某项东西进行引用”的操作符。当我们把它用在一个数组名的前面的时候，比如， \@skipper， 他的结果就是对那个数组的引用。对数组的引用就像是指针: 它指向数组，但是它不是数组本身。  </p>

<p>任何变量适宜地方都是适用于引用。它可以作用于一个数组或者哈希的元素，或者一个普通的标量变量， 像下面这样:  </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">my</span> <span class="nv">$reference_to_skipper</span> <span class="o">=</span> <span class="o">\</span><span class="nv">@skipper</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>引用可以被拷贝:  </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">my</span> <span class="nv">$second_reference_to_skipper</span> <span class="o">=</span> <span class="nv">$reference_to_skipper</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>甚至于：  </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">my</span> <span class="nv">$third_reference_to_skipper</span> <span class="o">=</span> <span class="o">\</span><span class="nv">@skipper</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>我们可以相互交换这3个引用。我们甚至可以说它们是相同的，因为事实上，它们就是相同的东西:  </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">if</span> <span class="p">(</span><span class="nv">$reference_to_skipper</span> <span class="o">=</span> <span class="o">=</span> <span class="nv">$second_reference_to_skipper</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">	<span class="k">print</span> <span class="s">&quot;They are identical references.\n&quot;</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>这个等式比较两个引用的数值形式。这里引用的数值形式是@skipper内部数据结构的唯一的内存地址, 它在变量的生命周期里是不会改变的。如果我们使用eq或者print来查看它的字符串形式，我们会得到调试出来的字符串:   </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="n">ARRAY</span><span class="p">(</span><span class="mh">0x1a2b3c</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>对于这个数组它也是唯一的，因为它包含了数组的唯一地址的16进制表示。调试出来的字符串同样也表示了这是个数组引用。当然要是我们在我们的代码中看到类似的输出，那就基本上表示了有bug。使用我们代码的用户是对16进制的存储地址块没有兴趣的。  </p>

<p>因为我们可以拷贝一个引用，向一个子程序传递一个参数事实上就是拷贝，我们可以使用下面的代码来向子程序中的数组传递一个引用:   </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">my</span> <span class="nv">@skipper</span> <span class="o">=</span> <span class="sx">qw(blue_shirt hat jacket preserver sunscreen)</span><span class="p">;</span>
</span><span class="line"><span class="n">check_required_items</span><span class="p">(</span><span class="s">&quot;The Skipper&quot;</span><span class="p">,</span> <span class="o">\</span><span class="nv">@skipper</span><span class="p">);</span>
</span><span class="line">
</span><span class="line"><span class="k">sub </span><span class="nf">check_required_items</span> <span class="p">{</span>
</span><span class="line">	<span class="k">my</span> <span class="nv">$who</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class="line">	<span class="k">my</span> <span class="nv">$items</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class="line">	<span class="k">my</span> <span class="nv">@required</span> <span class="o">=</span> <span class="sx">qw(preserver sunscreen water_bottle jacket)</span><span class="p">;</span>
</span><span class="line">	<span class="o">...</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>现在子程序中的$items是对数组@skipper的一个引用。但是我么怎么能够从一个引用得到我们原先的数组呢? 那当然是我们对引用进行解引用了。</p>

<h2 id="section-2">对数组引用进行解引用</h2>

<p>如果你看一下@skipper的话，你会发现他包含了两部分：@符号以及数组的名字。类似的， 语法$syntax[1]包含了中间部分的数组名以及在外围部分的一些语法来得到数组的第二个元素(指标值1是第二个元素因为指标值从0开始).    </p>

<p>下面有个小的技巧: 我们可以向数组中放置任何一个包含在大括号中的引用，来代替数组名，这样就得到了一个获得原先数组的方法。也就是说，任何我们用skipper来命令数组的地方，我们都可以使用大括号中包含引用的形式.：{$items}。例如， 下面的这两行都表示整个的数组。  </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="nv">@</span> <span class="nv">skipper</span>
</span><span class="line">
</span><span class="line"><span class="nv">@</span><span class="p">{</span> <span class="nv">$items</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>而下面的这两行都表示了数组的第二个元素:   </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="nv">$skipper</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span class="line">
</span><span class="line"><span class="nv">$</span><span class="p">{</span><span class="nv">$items</span><span class="p">}[</span><span class="mi">1</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>通过使用引用过的形式，我们把代码还有获取数组的方法从实际的数组分离开了。让我们看一下这是怎样改变了这个子程序的其余的部分的。   </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">sub </span><span class="nf">check_required_items</span> <span class="p">{</span>
</span><span class="line">	<span class="k">my</span> <span class="nv">$who</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class="line">	<span class="k">my</span> <span class="nv">$items</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class="line">	<span class="k">my</span> <span class="nv">@required</span> <span class="o">=</span> <span class="sx">qw(preserver sunscreen water_bottle jacket)</span><span class="p">;</span>
</span><span class="line">	<span class="k">for</span> <span class="k">my</span> <span class="nv">$item</span> <span class="p">(</span><span class="nv">@required</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">		<span class="k">unless</span> <span class="p">(</span><span class="nb">grep</span> <span class="nv">$item</span> <span class="ow">eq</span> <span class="nv">$_</span><span class="p">,</span> <span class="nv">@</span><span class="p">{</span><span class="nv">$items</span><span class="p">})</span> <span class="p">{</span> <span class="c1"># not found in list?</span>
</span><span class="line">		<span class="k">print</span> <span class="s">&quot;$who is missing $item.\n&quot;</span><span class="p">;</span>
</span><span class="line">		<span class="p">}</span>
</span><span class="line">	<span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>我们所做的就是把@_(供应清单的副本)替换成@{$items},一个对原先供应清单的引用的解引用. 现在我们就可以像之前那样，对子程序调用几次了:   </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">my</span> <span class="nv">@skipper</span> <span class="o">=</span> <span class="sx">qw(blue_shirt hat jacket preserver sunscreen)</span><span class="p">;</span>
</span><span class="line"><span class="n">check_required_items</span><span class="p">(</span><span class="s">&#39;The Skipper&#39;</span><span class="p">,</span> <span class="o">\</span><span class="nv">@skipper</span><span class="p">);</span>
</span><span class="line"><span class="k">my</span> <span class="nv">@professor</span> <span class="o">=</span> <span class="sx">qw(sunscreen water_bottle slide_rule batteries radio)</span><span class="p">;</span>
</span><span class="line"><span class="n">check_required_items</span><span class="p">(</span><span class="s">&#39;Professor&#39;</span><span class="p">,</span> <span class="o">\</span><span class="nv">@professor</span><span class="p">);</span>
</span><span class="line"><span class="k">my</span> <span class="nv">@gilligan</span> <span class="o">=</span> <span class="sx">qw(red_shirt hat lucky_socks water_bottle)</span><span class="p">;</span>
</span><span class="line"><span class="n">check_required_items</span><span class="p">(</span><span class="s">&#39;Gilligan&#39;</span><span class="p">,</span> <span class="o">\</span><span class="nv">@gilligan</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>在每一种情况下，$items都指向一个不同的数组，所以每次我们调用的时候，同样的代码都指向不同的数组。只是引用的最重要的用法之一: 把代码从它所作用的数据结构上面分离开来，那样我们就可以更方便地重用代码了。  </p>

<p>通过引用传递数组解决了我们之前提到的两个问题中的第一个问题. 现在，我们得到了一个指向供应清单的单一的引用引用， 而不是把整个的供应清单都拷贝到@_数组中去.   </p>

<p>我们可以把子程序开头的两个shift给去掉吗? 当然， 但是那样会牺牲掉清晰性的.   </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">sub </span><span class="nf">check_required_items</span> <span class="p">{</span>
</span><span class="line">	<span class="k">my</span> <span class="nv">@required</span> <span class="o">=</span> <span class="sx">qw(preserver sunscreen water_bottle jacket)</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">	<span class="k">for</span> <span class="k">my</span> <span class="nv">$item</span> <span class="p">(</span><span class="nv">@required</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">		<span class="k">unless</span> <span class="p">(</span><span class="nb">grep</span> <span class="nv">$item</span> <span class="ow">eq</span> <span class="nv">$_</span><span class="p">,</span> <span class="nv">@</span><span class="p">{</span><span class="nv">$_</span><span class="p">[</span><span class="mi">1</span><span class="p">]})</span> <span class="p">{</span> <span class="c1"># not found in list?</span>
</span><span class="line">		<span class="k">print</span> <span class="s">&quot;$_[0] is missing $item.\n&quot;</span><span class="p">;</span>
</span><span class="line">		<span class="p">}</span>
</span><span class="line">	<span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>在@_中仍然有两个元素, 第一个元素是乘客或者乘务人员的名字， 我们将在错误信息中使用到。第二个元素是对正确的供应清单的引用，我们在grep表达式中会使用到.   </p>

<h2 id="section-3">把括号去掉</h2>

<p>绝大多数时候，我们想要解引用的那个引用都是简单的标量变量, 如 @{$items} 或者 ${$items}[1]. 在那些情况下去掉大括号，而毫不含糊地就形成了 @$items或者 $$items[1].  </p>

<p>然而， 要是大括号中的值不是一个简单的标量变量的时候, 我们就不可以把括号个去掉了. 例如, 对于来自上个自程序中的重写@{$_[1]}, 我们就不可以把括号给去掉了, 那是对数组的单一元素的访问，不是一个标量。  </p>

<p>这个规则也表示了我们将很容易看到”缺失”的括号得放到什么地方去. 当我们看到 $$items[1]这个听讨厌的语法的时候，我们可以知道大括号肯定属于简单的表量变量$items的周围。因此，$items肯定是数组的一个引用.  </p>

<p>因此， 上面那个子程序的一个看起来更加舒服的版本就是:    </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">sub </span><span class="nf">check_required_items</span> <span class="p">{</span>
</span><span class="line">	<span class="k">my</span> <span class="nv">$who</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class="line">	<span class="k">my</span> <span class="nv">$items</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class="line">	<span class="k">my</span> <span class="nv">@required</span> <span class="o">=</span> <span class="sx">qw(preserver sunscreen water_bottle jacket)</span><span class="p">;</span>
</span><span class="line">	<span class="k">for</span> <span class="k">my</span> <span class="nv">$item</span> <span class="p">(</span><span class="nv">@required</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">		<span class="k">unless</span> <span class="p">(</span><span class="nb">grep</span> <span class="nv">$item</span> <span class="ow">eq</span> <span class="nv">$_</span><span class="p">,</span> <span class="nv">@$items</span><span class="p">)</span> <span class="p">{</span> <span class="c1"># not found in list?</span>
</span><span class="line">		<span class="k">print</span> <span class="s">&quot;$who is missing $item.\n&quot;</span><span class="p">;</span>
</span><span class="line">		<span class="p">}</span>
</span><span class="line">	<span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>唯一的区别就是我们把@$items周围的括号给去掉了.  </p>

<h2 id="section-4">修改数组</h2>

<p>你已经看到了怎样通过一个数组的引用来解决过度的复制的问题. 现在让我们看下怎样修改原先的数组.  </p>

<p>对于每一个缺失的供应品，我们把它push到一个数组里面去， 强迫乘客考虑这个条款:  </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">sub </span><span class="nf">check_required_items</span> <span class="p">{</span>
</span><span class="line">	<span class="k">my</span> <span class="nv">$who</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class="line">	<span class="k">my</span> <span class="nv">$items</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class="line">	<span class="k">my</span> <span class="nv">@required</span> <span class="o">=</span> <span class="sx">qw(preserver sunscreen water_bottle jacket)</span><span class="p">;</span>
</span><span class="line">	<span class="k">my</span> <span class="nv">@missing</span> <span class="o">=</span> <span class="p">(</span> <span class="p">);</span>
</span><span class="line">	<span class="k">for</span> <span class="k">my</span> <span class="nv">$item</span> <span class="p">(</span><span class="nv">@required</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">		<span class="k">unless</span> <span class="p">(</span><span class="nb">grep</span> <span class="nv">$item</span> <span class="ow">eq</span> <span class="nv">$_</span><span class="p">,</span> <span class="nv">@$items</span><span class="p">)</span> <span class="p">{</span> <span class="c1"># not found in list?</span>
</span><span class="line">		<span class="k">print</span> <span class="s">&quot;$who is missing $item.\n&quot;</span><span class="p">;</span>
</span><span class="line">		<span class="nb">push</span> <span class="nv">@missing</span><span class="p">,</span> <span class="nv">$item</span><span class="p">;</span>
</span><span class="line">	    <span class="p">}</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">
</span><span class="line">	<span class="k">if</span> <span class="p">(</span><span class="nv">@missing</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">		<span class="k">print</span> <span class="s">&quot;Adding @missing to @$items for $who.\n&quot;</span><span class="p">;</span>
</span><span class="line">	    <span class="nb">push</span> <span class="nv">@$items</span><span class="p">,</span> <span class="nv">@missing</span><span class="p">;</span>
</span><span class="line">	<span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>注意下添加的@missing数组。如果我们在扫描的过程中发现了任何物品缺失了， 我们可以把它push到@missing中去。如果在扫描完了之后这个数组中有东西的话，我们就把它添加到原先的供应清单中去。  </p>

<p>关键点就是这个子程序中的最后一行。我们对$items数组引用进行解引用，访问原先的数组，然后把@missing中元素添加进去。要是没有引用传值的话，我们将只能修改数据的一个本地的拷贝，那样将对原先的数组没有任何的影响。  </p>

<p>同样的, @items(以及它的更加常见的形式@{$items})可以在双引号引起来的字符串中运作。我们不可以在@和接下来的任何的字符之间包含空格，尽管我们可以在大括号中包含任意数量的空格， 就好像那是正常的Perl代码一样。  </p>

<h2 id="section-5">嵌套的数据结构</h2>

<p>在下面的例子中，数组@_包含了两个元素, 其中之一仍然是数组. 如果我们对一个数组进行引用，而这个数组又包含了一个一个对数组的引用, 那将会怎么样呢？ 我们得到的将是一个复杂的数据结构, 这将是非常有用的。  </p>

<p>例如, 我们可以先构建一个更大的数据结构，它包含了整个的供应清单, 通过来对数据进行递归，我们将得到Skipper, Gilligan还有Professor的信息:  </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">my</span> <span class="nv">@skipper</span> <span class="o">=</span> <span class="sx">qw(blue_shirt hat jacket preserver sunscreen)</span><span class="p">;</span>
</span><span class="line"><span class="k">my</span> <span class="nv">@skipper_with_name</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Skipper&#39;</span><span class="p">,</span> <span class="o">\</span><span class="nv">@skipper</span><span class="p">);</span>
</span><span class="line"><span class="k">my</span> <span class="nv">@professor</span> <span class="o">=</span> <span class="sx">qw(sunscreen water_bottle slide_rule batteries radio)</span><span class="p">;</span>
</span><span class="line"><span class="k">my</span> <span class="nv">@professor_with_name</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Professor&#39;</span><span class="p">,</span> <span class="o">\</span><span class="nv">@professor</span><span class="p">);</span>
</span><span class="line"><span class="k">my</span> <span class="nv">@gilligan</span> <span class="o">=</span> <span class="sx">qw(red_shirt hat lucky_socks water_bottle)</span><span class="p">;</span>
</span><span class="line"><span class="k">my</span> <span class="nv">@gilligan_with_name</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Gilligan&#39;</span><span class="p">,</span> <span class="o">\</span><span class="nv">@gilligan</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>现在@skipper_with_name就有两个元素了, 第二个元素是数组的引用，同我们之前传递给子程序的是相似的。现在我们把这些都组合起来:  </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">my</span> <span class="nv">@all_with_names</span> <span class="o">=</span> <span class="p">(</span>
</span><span class="line"><span class="o">\</span><span class="nv">@skipper_with_name</span><span class="p">,</span>
</span><span class="line"><span class="o">\</span><span class="nv">@professor_with_name</span><span class="p">,</span>
</span><span class="line"><span class="o">\</span><span class="nv">@gilligan_with_name</span><span class="p">,</span>
</span><span class="line"><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>注意我们只有3个元素，其中的每一个都是一个对一个数组的引用，这个数组有两个元素: 名字还有对应的初始供应列表。图4-1是它的一个图片:  </p>

<p><img src="/images/sun/perl_4.1.png" />   </p>

<p>因此，$all_with_names[2]将会是对于Gilligan的数据的数组引用。如果你把它解引用的话@{$all_with_names[2]}，你将得到一个两个元素的数组，”Gilligan”还有另一个数组引用。     </p>

<p>我们该怎么访问那个数组引用呢？ 得再次使用我们的规则了， 也就是${$all_with_names[2]}[1]. 换句话说， 在有了$all_tiwh_names[2]之后， 我们会把它解引用到一个像是普通的数组$DUMMY[1]一样的表达式中去， 所以我们将用{$all_with_names[2]}来替换DUMMY.  </p>

<p>我们该如何使用这种数据结构来调用已经存在的 check_required_itesm()例程呢？ 下面的代码是足够简单的了:   </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">for</span> <span class="k">my</span> <span class="nv">$person</span> <span class="p">(</span><span class="nv">@all_with_names</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">	<span class="k">my</span> <span class="nv">$who</span> <span class="o">=</span> <span class="nv">$$person</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span><span class="line">	<span class="k">my</span> <span class="nv">$provisions_reference</span> <span class="o">=</span> <span class="nv">$$person</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span><span class="line">	<span class="n">check_required_items</span><span class="p">(</span><span class="nv">$who</span><span class="p">,</span> <span class="nv">$provisions_reference</span><span class="p">);</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>这并不要求对子程序做任何的改变。随着循环的推进， 控制变量$person将会依次是$all_with_names[0], $all_with_names[1], $all_with_names[2]中的一个。当我们解引用<script type="math/tex">person[0]之后， 我们会依次得到 “Skipper”， “Professor”，还有“Gilligan”。</script>person[1]是某个人对应的供应清单的数组引用。  </p>

<p>当然， 由于整个的被解引用的数组精确地匹配了参数列表，我们也可以把这个过程简化的。   </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">for</span> <span class="k">my</span> <span class="nv">$person</span> <span class="p">(</span><span class="nv">@all_with_names</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">	<span class="n">check_required_items</span><span class="p">(</span><span class="nv">@$person</span><span class="p">);</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>甚至是:  </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="n">check_required_items</span><span class="p">(</span><span class="nv">@$_</span><span class="p">)</span> <span class="k">for</span> <span class="nv">@all_with_names</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>正如你所看到的， 多层次的优化会导致困惑的。请确定你考虑到当一个月之后你得再次读你的代码的时候， 你是否能明白。 如果那还不够的话，请考虑下当你离职之后那个接手你的工作的人。   </p>

<h2 id="section-6">通过箭头来简化嵌套的元素引用</h2>

<p>再次看下大括号形式的解引用。正如在我们之前的例子中一样， 对于Gilligan的清单的数组引用是${$all_with_names[2]}[1]. 现在如果我们想知道Gilligan的第一个供应清单该怎么办呢？我们得对这个条款再进一步的解引用， 所以又是另外的一层大括号了: ${${$all_with_names[2]}[1]}[0]. 这真的令人讨厌的语法啊。我们能够简化它吗？ 当然可以！  </p>

<p>每当我们要写${DUMMY}[$y]的时候，我们可以写DUMMY-&gt;[$y]来代替。换句话说，我们可以这样来解引用一个数组的引用， 找出这个数组中的一个特定的元素，这可以简单地通过在定义这个数组的表达式的后面跟上一个箭头还有中括号引起来的下标。   </p>

<p>对于这个例子，这意味着我们可以用$all_with_names[2]-&gt;[1]来挑出针对Gilligan的数组引用，以及$all_with_names[2]-&gt;[1]-&gt;[0]来表示Gilligan的第一个物品清单。哇， 那看起来真的舒服多了。   </p>

<p>如果那还不够简单的话，还有一条规则可循: 如果箭头处在像方括号这样的可以包含下标的东西之间，我们可以把箭头个去掉。$all_with_names[2]-&gt;[1]-&gt;[0]就变成了$all_with_names[2][1][0]。 现在看起来就更加地舒服了。   </p>

<p>(以下省略一段不翻译了)。  </p>

<h2 id="section-7">对哈希的引用</h2>

<p>正如我们可以对数组进行引用，我们也可以对哈希进行引用。再一次地，我们使用反斜杠来作为引用的操作符.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">my</span> <span class="nv">%gilligan_info</span> <span class="o">=</span> <span class="p">(</span>
</span><span class="line">	<span class="n">name</span> <span class="o">=&gt;</span> <span class="s">&#39;Gilligan&#39;</span><span class="p">,</span>
</span><span class="line">	<span class="n">hat</span> <span class="o">=&gt;</span> <span class="s">&#39;White&#39;</span><span class="p">,</span>
</span><span class="line">	<span class="n">shirt</span> <span class="o">=&gt;</span> <span class="s">&#39;Red&#39;</span><span class="p">,</span>
</span><span class="line">	<span class="n">position</span> <span class="o">=&gt;</span> <span class="s">&#39;First Mate&#39;</span><span class="p">,</span>
</span><span class="line"><span class="p">);</span>
</span><span class="line">
</span><span class="line"><span class="k">my</span> <span class="nv">$hash_ref</span> <span class="o">=</span> <span class="o">\</span><span class="nv">%gilligan_info</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>我们可以对一个哈希引用进行解引用来得到原先的数据。这个策略同对一个数组引用进行解引用是类似的。  </p>

<p>我们像在没有引用的情况下一样写出哈希的语法，然后在包含引用的那个东西的周围使用大括号括起来， 这样子来替换掉原先的哈希名字。例如，为了超出某个键的特定的值，我们可以这样来做:  </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">my</span> <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$</span> <span class="nv">gilligan_info</span> <span class="p">{</span> <span class="s">&#39;name&#39;</span> <span class="p">};</span>
</span><span class="line"><span class="k">my</span> <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$</span> <span class="p">{</span> <span class="nv">$hash_ref</span> <span class="p">}</span> <span class="p">{</span> <span class="s">&#39;name&#39;</span> <span class="p">};</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>在这个例子中，大括号是有着两种不同的意思的. 第一对大括号代表的表达式返回一个引用，而第二个大括号是作为代表哈希键的表达式的界定符.  </p>

<p>如同数组的引用一样，我们可以在有些情况下使用快捷方式来替换复杂的大括号的这种形式. 例如， 如果在大括号中只有一个简单的标量变量的话，我们就可以把大括号个去掉的.   </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">my</span> <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$$hash_ref</span><span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">};</span>
</span><span class="line"><span class="k">my</span> <span class="nv">@keys</span> <span class="o">=</span> <span class="nb">keys</span> <span class="nv">%$hash_ref</span><span class="p">;</span>
</span><span class="line">
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>像数组的引用一样， 当指向某个具体的哈希元素的时候，我们可以使用箭头的形式:   </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">my</span> <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$hash_ref</span><span class="o">-&gt;</span><span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>由于凡是标量变量可以存在的地方, 哈希的引用都可以存在, 所以我们可以创建一个哈希引用的数组,   </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">my</span> <span class="nv">%gilligan_info</span> <span class="o">=</span> <span class="p">(</span>
</span><span class="line">	<span class="n">name</span> <span class="o">=&gt;</span> <span class="s">&#39;Gilligan&#39;</span><span class="p">,</span>
</span><span class="line">	<span class="n">hat</span> <span class="o">=&gt;</span> <span class="s">&#39;White&#39;</span><span class="p">,</span>
</span><span class="line">	<span class="n">shirt</span> <span class="o">=&gt;</span> <span class="s">&#39;Red&#39;</span><span class="p">,</span>
</span><span class="line">	<span class="n">position</span> <span class="o">=&gt;</span> <span class="s">&#39;First Mate&#39;</span><span class="p">,</span>
</span><span class="line"><span class="p">);</span>
</span><span class="line">
</span><span class="line"><span class="k">my</span> <span class="nv">%skipper_info</span> <span class="o">=</span> <span class="p">(</span>
</span><span class="line">	<span class="n">name</span> <span class="o">=&gt;</span> <span class="s">&#39;Skipper&#39;</span><span class="p">,</span>
</span><span class="line">	<span class="n">hat</span> <span class="o">=&gt;</span> <span class="s">&#39;Black&#39;</span><span class="p">,</span>
</span><span class="line">	<span class="n">shirt</span> <span class="o">=&gt;</span> <span class="s">&#39;Blue&#39;</span><span class="p">,</span>
</span><span class="line">	<span class="n">position</span> <span class="o">=&gt;</span> <span class="s">&#39;Captain&#39;</span><span class="p">,</span>
</span><span class="line"><span class="p">);</span>
</span><span class="line"><span class="k">my</span> <span class="nv">@crew</span> <span class="o">=</span> <span class="p">(</span><span class="o">\</span><span class="nv">%gilligan_info</span><span class="p">,</span> <span class="o">\</span><span class="nv">%skipper_info</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>因此, $crew[0]是一个指向关于Gilligan的信息的哈希引用。我们可以通过下面的其中之一来得到Gilligan的名字:    </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="nv">$</span><span class="p">{</span> <span class="nv">$crew</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">}</span> <span class="p">{</span> <span class="s">&#39;name&#39;</span> <span class="p">}</span>
</span><span class="line"><span class="k">my</span> <span class="nv">$ref</span> <span class="o">=</span> <span class="nv">$crew</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="nv">$$ref</span><span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">}</span>
</span><span class="line"><span class="nv">$crew</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">}</span>
</span><span class="line"><span class="nv">$crew</span><span class="p">[</span><span class="mi">0</span><span class="p">]{</span><span class="s">&#39;name&#39;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>让我们来打印出一个员工的花名册, </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line">
</span><span class="line"><span class="k">my</span> <span class="nv">%gilligan_info</span> <span class="o">=</span> <span class="p">(</span>
</span><span class="line">	<span class="n">name</span> <span class="o">=&gt;</span> <span class="s">&#39;Gilligan&#39;</span><span class="p">,</span>
</span><span class="line">	<span class="n">hat</span> <span class="o">=&gt;</span> <span class="s">&#39;White&#39;</span><span class="p">,</span>
</span><span class="line">	<span class="n">shirt</span> <span class="o">=&gt;</span> <span class="s">&#39;Red&#39;</span><span class="p">,</span>
</span><span class="line">	<span class="n">position</span> <span class="o">=&gt;</span> <span class="s">&#39;First Mate&#39;</span><span class="p">,</span>
</span><span class="line"><span class="p">);</span>
</span><span class="line">
</span><span class="line"><span class="k">my</span> <span class="nv">%skipper_info</span> <span class="o">=</span> <span class="p">(</span>
</span><span class="line">	<span class="n">name</span> <span class="o">=&gt;</span> <span class="s">&#39;Skipper&#39;</span><span class="p">,</span>
</span><span class="line">	<span class="n">hat</span> <span class="o">=&gt;</span> <span class="s">&#39;Black&#39;</span><span class="p">,</span>
</span><span class="line">	<span class="n">shirt</span> <span class="o">=&gt;</span> <span class="s">&#39;Blue&#39;</span><span class="p">,</span>
</span><span class="line">	<span class="n">position</span> <span class="o">=&gt;</span> <span class="s">&#39;Captain&#39;</span><span class="p">,</span>
</span><span class="line"><span class="p">);</span>
</span><span class="line">
</span><span class="line"><span class="k">my</span> <span class="nv">@crew</span> <span class="o">=</span> <span class="p">(</span><span class="o">\</span><span class="nv">%gilligan_info</span><span class="p">,</span> <span class="o">\</span><span class="nv">%skipper_info</span><span class="p">);</span>
</span><span class="line"><span class="k">my</span> <span class="nv">$format</span> <span class="o">=</span> <span class="s">&quot;%-15s %-7s %-7s %-15s\n&quot;</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="nb">printf</span> <span class="nv">$format</span><span class="p">,</span> <span class="sx">qw(Name Shirt Hat Position)</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="k">for</span> <span class="k">my</span> <span class="nv">$crewmember</span> <span class="p">(</span><span class="nv">@crew</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">	<span class="nb">printf</span> <span class="nv">$format</span><span class="p">,</span>
</span><span class="line">	<span class="nv">$crewmember</span><span class="o">-&gt;</span><span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">},</span>
</span><span class="line">	<span class="nv">$crewmember</span><span class="o">-&gt;</span><span class="p">{</span><span class="s">&#39;shirt&#39;</span><span class="p">},</span>
</span><span class="line">	<span class="nv">$crewmember</span><span class="o">-&gt;</span><span class="p">{</span><span class="s">&#39;hat&#39;</span><span class="p">},</span>
</span><span class="line">	<span class="nv">$crewmember</span><span class="o">-&gt;</span><span class="p">{</span><span class="s">&#39;position&#39;</span><span class="p">};</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>最后的这部分看起来很冗余，我们可以使用哈希切割来简化它。如果原先的语法是: </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="nv">@</span> <span class="nv">gilligan_info</span> <span class="p">{</span> <span class="sx">qw(name position)</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>从引用得来的哈希切割的表示方法如下:  </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="nv">@</span> <span class="p">{</span> <span class="nv">$hash_ref</span> <span class="p">}</span> <span class="p">{</span> <span class="sx">qw(name position)</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>我们可以把第一对大括号给去掉，因为里面唯一的东西是一个简单的标量变量值。  </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="nv">@</span> <span class="err">$</span><span class="nv">hash_ref</span> <span class="p">{</span> <span class="sx">qw(name position)</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>这样我们就可以把那个最后的循环替换成:  </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="perl"><span class="line"><span class="k">for</span> <span class="k">my</span> <span class="nv">$crewmember</span> <span class="p">(</span><span class="nv">@crew</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">	<span class="nb">printf</span> <span class="nv">$format</span><span class="p">,</span> <span class="nv">@$crewmember</span><span class="p">{</span><span class="sx">qw(name shirt hat position)</span><span class="p">};</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>对于数组切割或者哈希切割没有使用箭头形式的简化表示， 正如对于整个的数组后者哈希也没有简化表示一样。</p>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/13/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/11/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Steven Sun -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
