<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[catogories：Data&ML&AI | Steven's Blog]]></title>
  <link href="http://isunix.github.io/blog/categories/data-and-ml-and-ai/atom.xml" rel="self"/>
  <link href="http://isunix.github.io/"/>
  <updated>2020-12-13T19:49:57+08:00</updated>
  <id>http://isunix.github.io/</id>
  <author>
    <name><![CDATA[Steven Sun]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[谱聚类简介]]></title>
    <link href="http://isunix.github.io/blog/2020/12/13/pu-ju-lei-jian-jie/"/>
    <updated>2020-12-13T16:48:11+08:00</updated>
    <id>http://isunix.github.io/blog/2020/12/13/pu-ju-lei-jian-jie</id>
    <content type="html"><![CDATA[<p>```
假如我们的数据集是n维的，共有m个数据, 
我们希望将这m个数据的维度从n维降到n’维，希望这m个n’维的数据集尽可能的代表原始数据集. </p>

<p>假设我们有这样的n’维的超平面，我们希望得到什么样的效果呢？</p>

<ol>
  <li>样本点到这个超平面的距离足够近;</li>
  <li>样本点在这个直线上的投影能尽可能的分开;</li>
</ol>

<p>基于上面这两种标准，我们可以得到如下的PCA的推导:</p>

<ol>
  <li>基于最小投影距离;</li>
  <li>基于最大投影方差;
```</li>
</ol>

<h3 id="section">参考资料:</h3>

<p><a href="https://www.cnblogs.com/pinard/p/6239403.html">主成分分析（PCA）原理总结</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[主成分分析-PCA-简介]]></title>
    <link href="http://isunix.github.io/blog/2020/12/13/zhu-cheng-fen-fen-xi-pca-jian-jie/"/>
    <updated>2020-12-13T16:41:20+08:00</updated>
    <id>http://isunix.github.io/blog/2020/12/13/zhu-cheng-fen-fen-xi-pca-jian-jie</id>
    <content type="html"><![CDATA[<p>```
    假如我们的数据集是n维的，共有m个数据, 
    我们希望将这m个数据的维度从n维降到n’维，希望这m个n’维的数据集尽可能的代表原始数据集. </p>

<pre><code>假设我们有这样的n'维的超平面，我们希望得到什么样的效果呢？

1. 样本点到这个超平面的距离足够近;
2. 样本点在这个直线上的投影能尽可能的分开;

基于上面这两种标准，我们可以得到如下的PCA的推导:

1. 基于最小投影距离;
2. 基于最大投影方差; ```
</code></pre>

<h3 id="section">参考资料:</h3>

<p><a href="https://www.cnblogs.com/pinard/p/6239403.html">主成分分析（PCA）原理总结</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[线性判别分析简介]]></title>
    <link href="http://isunix.github.io/blog/2020/12/13/xian-xing-pan-bie-fen-xi-jian-jie/"/>
    <updated>2020-12-13T09:46:36+08:00</updated>
    <id>http://isunix.github.io/blog/2020/12/13/xian-xing-pan-bie-fen-xi-jian-jie</id>
    <content type="html"><![CDATA[<p>简单概括下线性判别分析(Linear Discriminant Analysis)的思想就是:</p>

<p>```
数据投影到一个向量上，使得同一种类别数据的投影点尽可能的接近，也就是要同类样本投影点的协方差尽可能的小; </p>

<p>同时让不同类别的数据的类别中心之间的距离尽可能的大
```</p>

<h3 id="section">参考资料：</h3>

<p><a href="https://www.cnblogs.com/pinard/p/6244265.html">线性判别分析LDA原理总结</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Matplotlib和Seaborn使用方法集锦]]></title>
    <link href="http://isunix.github.io/blog/2020/12/11/matplotlibhe-seabornshi-yong-fang-fa-ji-jin/"/>
    <updated>2020-12-11T11:41:28+08:00</updated>
    <id>http://isunix.github.io/blog/2020/12/11/matplotlibhe-seabornshi-yong-fang-fa-ji-jin</id>
    <content type="html"><![CDATA[<h4 id="section">1. 引入常用的包</h4>

<p><code>py
import pandas as pd 
import numpy as np
import matplotlib.pyplot as plt 
import seaborn as sns
</code></p>

<h4 id="pairplot">2. 选定若干列，画pairplot</h4>

<p>```py
sns.pairplot(college.iloc[:,1:11])</p>

<p>sns.pairplot(auto) # 选择全部列的数据
```</p>

<h4 id="boxplot">3. 选定两列，画出来boxplot</h4>

<p><code>py
sns.boxplot(x = college['Private'],y = college['Outstate'])
</code></p>

<h4 id="bar">4. 通过bar画直方图</h4>

<p>```py
fig = plt.figure()</p>

<p>plt.subplot(2,2,1) college[‘Enroll’].value_counts().plot.bar(title = ‘Enroll’)</p>

<p>plt.subplot(2,2,2) college[‘PhD’].value_counts().plot.bar(title = ‘PhD’)</p>

<p>plt.subplot(2,2,3) college[‘Terminal’].value_counts().plot.bar(title = ‘Terminal’)</p>

<h1 id="to-add-space-in-between-the-subplots">to add space in between the subplots</h1>
<p>fig.subplots_adjust(hspace=1)
```</p>

<h4 id="section-1">5. 画出散点图和曲线图，并且设置线的颜色</h4>

<p><code>py
plt.figure(figsize = (14,8)) 
plt.scatter(auto['horsepower'],auto['mpg']) 
plt.plot(auto['horsepower'],pred_1,color = 'orange') 
plt.plot(auto['horsepower'],pred_2,color = 'green') 
plt.plot(auto['horsepower'],pred_5,color = 'black') 
plt.show()
</code></p>

<h4 id="x">6. 绘制平行于x轴的水平参考线</h4>

<p><code>py
error_1 = auto['mpg'] - pred_1 
plt.figure(figsize = (12,6)) 
sns.scatterplot(x = auto['mpg'],y = error_1) 
plt.axhline(y = 0,linestyle = 'dashed',color = 'black',linewidth = 0.5)
</code></p>

<h4 id="snsregplot">7. 用sns.regplot来比较两个变量的关系是否符合线性回归</h4>

<p>```py
sns.regplot(data[‘LSTAT’],data[‘MEDV’])</p>

<h1 id="regplot">regplot中设置参数</h1>
<p>sns.regplot(advertising.TV, advertising.Sales, order=1, ci=None, scatter_kws={‘color’:’r’, ‘s’:9})
plt.xlim(-10,310)
plt.ylim(ymin=0);
```</p>

<h4 id="labeltitle">8. 设置label和title和</h4>

<p><code>py
plt.xlabel('Fitted Vales') 
plt.ylabel('Residuals') 
plt.title('Residual Plot')
</code></p>

<h4 id="sns">9. 使用sns画相关系数矩阵的热力图</h4>

<p><code>py
sns.heatmap(auto.iloc[:,:-1].corr())
</code></p>

<h4 id="labellegend">10. 设置线的label并且置成legend</h4>

<p>```py
plt.figure(figsize = (14,6)) 
sns.scatterplot(X,Y) 
plt.xlabel(‘X’) 
plt.ylabel(‘Y’) </p>

<p>plt.plot(data[‘X’],lin_model.predict(data[‘X’].to_frame()),color = ‘orange’,label = ‘Predicted Line’) 
plt.title(‘Relationship b/w X and Y’) 
plt.plot(tmp_x,tmp_y,color = ‘green’,label = ‘True Line’) 
plt.legend()
plt.show()
```</p>

<h4 id="section-2">11. 设置坐标范围, 设置相等的宽和高</h4>

<p>```py
fig, ax = plt.subplots()</p>

<p>sns.scatterplot(simple_coeff,multi_coeff)</p>

<p>lims = [
    np.min([ax.get_xlim(), ax.get_ylim()]),  # min of both axes
    np.max([ax.get_xlim(), ax.get_ylim()]),  # max of both axes
]</p>

<p>ax.plot(lims, lims, ‘k-‘, alpha=0.75, zorder=0,color = ‘orange’)
ax.set_aspect(‘equal’)
ax.set_xlim(lims)
ax.set_ylim(lims)
```</p>

<h4 id="hue">12. 设置hue</h4>

<p>```py
plt.figure(figsize = (12,8))</p>

<p>tmp = pd.DataFrame({‘Lag1’:X_train[‘Lag1’],’Lag2’:X_train[‘Lag2’],’Direction’:y_train})</p>

<p>sns.scatterplot(y = ‘Lag2’,x = ‘Lag1’,hue = ‘Direction’,data = tmp)
```</p>

<h4 id="section-3">13. 画等高线和三维图</h4>

<p>```py
fig = plt.figure(figsize=(15,6))
fig.suptitle(‘RSS - Regression coefficients’, fontsize=20)</p>

<p>ax1 = fig.add_subplot(121)
ax2 = fig.add_subplot(122, projection=’3d’)</p>

<h1 id="left-plot">Left plot</h1>
<p>CS = ax1.contour(xx, yy, Z, cmap=plt.cm.Set1, levels=[2.15, 2.2, 2.3, 2.5, 3])
ax1.scatter(regr.intercept<em>, regr.coef</em>[0], c=’r’, label=min_RSS)
ax1.clabel(CS, inline=True, fontsize=10, fmt=’%1.1f’)</p>

<h1 id="right-plot">Right plot</h1>
<p>ax2.plot_surface(xx, yy, Z, rstride=3, cstride=3, alpha=0.3)
ax2.contour(xx, yy, Z, zdir=’z’, offset=Z.min(), cmap=plt.cm.Set1,
            alpha=0.4, levels=[2.15, 2.2, 2.3, 2.5, 3])
ax2.scatter3D(regr.intercept<em>, regr.coef</em>[0], min_rss, c=’r’, label=min_RSS)
ax2.set_zlabel(‘RSS’)
ax2.set_zlim(Z.min(),Z.max())
ax2.set_ylim(0.02,0.07)</p>

<h1 id="settings-common-to-both-plots">settings common to both plots</h1>
<p>for ax in fig.axes:
    ax.set_xlabel(r’$\beta<em>0$’, fontsize=17)
    ax.set_ylabel(r’$\beta</em>1$’, fontsize=17)
    ax.set_yticks([0.03,0.04,0.05,0.06])
    ax.legend()
```</p>

<h4 id="d">14. 3D散点图</h4>

<p>```py
# Create plot
fig = plt.figure(figsize=(10,6))
fig.suptitle(‘Regression: Sales ~ Radio + TV Advertising’, fontsize=20)</p>

<p>ax = axes3d.Axes3D(fig)</p>

<p>ax.plot_surface(B1, B2, Z, rstride=10, cstride=5, alpha=0.4)
ax.scatter3D(advertising.Radio, advertising.TV, advertising.Sales, c=’r’)</p>

<p>ax.set_xlabel(‘Radio’)
ax.set_xlim(0,50)
ax.set_ylabel(‘TV’)
ax.set_ylim(ymin=0)
ax.set_zlabel(‘Sales’)
```</p>

<h4 id="suptitleclabel">15. suptitle、用clabel为等高线添加高程标签</h4>

<p>```py
fig = plt.figure(figsize=(12,5))
fig.suptitle(‘RSS - Regression coefficients’, fontsize=20)</p>

<p>ax1 = fig.add_subplot(121)
ax2 = fig.add_subplot(122)</p>

<p>min_RSS = r’$\beta<em>0$, $\beta</em>1$ for minimized RSS’</p>

<h1 id="left-plot-1">Left plot</h1>
<p>CS = ax1.contour(X1, Y1, Z1, cmap=plt.cm.Set1, levels=[21.25, 21.5, 21.8])
ax1.scatter(regr1.coef<em>[1], regr1.coef</em>[0], c=’r’, label=min_RSS)
ax1.clabel(CS, inline=True, fontsize=10, fmt=’%1.1f’)
ax1.set_ylabel(r’$\beta_{Age}$’, fontsize=17)</p>

<h1 id="right-plot-1">Right plot</h1>
<p>CS = ax2.contour(X2, Y2, Z2, cmap=plt.cm.Set1, levels=[21.5, 21.8])
ax2.scatter(regr2.coef<em>[1], regr2.coef</em>[0], c=’r’, label=min_RSS)
ax2.clabel(CS, inline=True, fontsize=10, fmt=’%1.1f’)
ax2.set_ylabel(r’$\beta_{Rating}$’, fontsize=17)
ax2.set_xticks([-0.1, 0, 0.1, 0.2])</p>

<p>for ax in fig.axes:
    ax.set_xlabel(r’$\beta_{Limit}$’, fontsize=17)
    ax.legend()
```</p>

<h4 id="section-4">16. 同时画两种不同的散点图</h4>

<p>```py
fig = plt.figure(figsize=(12,5))
gs = mpl.gridspec.GridSpec(1, 4)
ax1 = plt.subplot(gs[0,:-2])
ax2 = plt.subplot(gs[0,-2])
ax3 = plt.subplot(gs[0,-1])</p>

<h1 id="take-a-fraction-of-the-samples-where-target-value-default-is-no">Take a fraction of the samples where target value (default) is ‘no’</h1>
<p>df_no = df[df.default2 == 0].sample(frac=0.15)
# Take all samples  where target value is ‘yes’
df_yes = df[df.default2 == 1]
df_ = df_no.append(df_yes)</p>

<p>ax1.scatter(df<em>[df</em>.default == ‘Yes’].balance, df<em>[df</em>.default == ‘Yes’].income, s=40, c=’orange’, marker=’+’,
            linewidths=1)
ax1.scatter(df<em>[df</em>.default == ‘No’].balance, df<em>[df</em>.default == ‘No’].income, s=40, marker=’o’, linewidths=1,
             edgecolors=’lightblue’, facecolors=’white’, alpha=.6)</p>

<p>ax1.set_ylim(ymin=0)
ax1.set_ylabel(‘Income’)
ax1.set_xlim(xmin=-100)
ax1.set_xlabel(‘Balance’)</p>

<p>c_palette = {‘No’:’lightblue’, ‘Yes’:’orange’}
sns.boxplot(‘default’, ‘balance’, data=df, orient=’v’, ax=ax2, palette=c_palette)
sns.boxplot(‘default’, ‘income’, data=df, orient=’v’, ax=ax3, palette=c_palette)
gs.tight_layout(plt.gcf())
```</p>

<h4 id="annotate">17. 使用注解(annotate)</h4>

<p><code>py
df.plot('Years', 'Hits', kind='scatter', color='orange', figsize=(7,6))
plt.xlim(0,25)
plt.ylim(ymin=-5)
plt.xticks([1, 4.5, 24])
plt.yticks([1, 117.5, 238])
plt.vlines(4.5, ymin=-5, ymax=250)
plt.hlines(117.5, xmin=4.5, xmax=25)
plt.annotate('R1', xy=(2,117.5), fontsize='xx-large')
plt.annotate('R2', xy=(11,60), fontsize='xx-large')
plt.annotate('R3', xy=(11,170), fontsize='xx-large')
</code></p>

<h3 id="section-5">参考资料</h3>

<ul>
  <li>https://github.com/JWarmenhoven/ISLR-python.git</li>
  <li>https://github.com/hardikkamboj/An-Introduction-to-Statistical-Learning.git</li>
</ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Pandas使用tips集锦]]></title>
    <link href="http://isunix.github.io/blog/2020/12/11/pandasshi-yong-tipsji-jin/"/>
    <updated>2020-12-11T09:18:43+08:00</updated>
    <id>http://isunix.github.io/blog/2020/12/11/pandasshi-yong-tipsji-jin</id>
    <content type="html"><![CDATA[<h3 id="section">1. 替换字符</h3>

<p><code>py
auto['horsepower'] = auto['horsepower'].replace('?',np.nan)
</code></p>

<h3 id="section-1">2. 删除空值</h3>

<p><code>py
auto = auto.dropna()
</code></p>

<h3 id="section-2">3. 改变字段类型</h3>

<p><code>py
auto['horsepower'] = auto['horsepower'].astype('int')
</code></p>

<h3 id="section-3">4. 按照某一个/多个字段排序</h3>

<p>```py
auto = auto.sort_values(by = [‘horsepower’],ascending = True, axis = 0)</p>

<p>boston.sort_values(by= [‘CRIM’,’TAX’,’PTRATIO’],ascending=False).head().index
```</p>

<h3 id="pandas">5. pandas设置索引</h3>

<p><code>py
college = college.set_index(['Unnamed: 0'], append=True, verify_integrity=True) college.rename_axis([None, 'Name'], inplace=True)
</code> </p>

<h3 id="section-4">6. 对某一列进行判断并且置值</h3>

<p>```py
college[‘Elite’] = np.where(college[‘Top10perc’] &gt; 50,’Yes’,’No’)</p>

<h1 id="map">使用map的方式</h1>
<p>credit[‘Student2’] = credit.Student.map({‘No’:0, ‘Yes’:1})
```</p>

<h3 id="section-5">7. 对某一列的值进行计数</h3>

<p><code>py
college['Elite'].value_counts()
</code></p>

<h3 id="section-6">8. 对某一列的值进行筛选</h3>

<p><code>py
elite_colleges = college[college['Elite'] == 'Yes']
</code></p>

<h3 id="section-7">9. 对某一列的数值进行分桶操作</h3>

<p><code>py
college['Enroll'] = pd.cut(college['Enroll'], bins=3, labels = ['Low','Medium','High'])
</code></p>

<h3 id="dfunique">10. 查看df中的各个字段的unique的数目和字段类型信息等</h3>

<p><code>py
auto.nunique()
auto.info()
auto['horsepower'].unique() # 看某一列的unique数目
</code></p>

<h3 id="section-8">11. 筛选单列和多列</h3>

<p><code>py
info['range'] = info['max'] - info['min'] 
info = info[['mean','range','std']]
</code></p>

<h3 id="index">12. 根据index筛选和删除多列</h3>

<p><code>py
info = auto.drop(auto.index[10:85]).describe().T
</code></p>

<h3 id="load">13. load数据并且指定列名</h3>

<p>```py
boston = pd.DataFrame(load_boston().data,columns = load_boston().feature_names )</p>

<p>data = pd.DataFrame(boston.data,columns = boston[‘feature_names’])</p>

<p>```</p>

<h3 id="iloc">14. 通过iloc选取行和列</h3>

<p>```py
corr_matrix = boston.corr() 
corr_matrix.iloc[1:,0].sort_values() </p>

<h1 id="section-9">选取所有行，和从第二列开始的所有列</h1>
<p>data = data.iloc[:,1:]
```</p>

<h3 id="df">15. 按照行/列进行df的拼接</h3>

<p><code>py
# 按行拼接
features = pd.concat([constant,features],axis = 1)
</code></p>

<h3 id="load-1">16. load数据并且选定列</h3>

<p><code>py
credit = pd.read_csv('Data/Credit.csv', usecols=list(range(1,12)))
advertising = pd.read_csv('Data/Advertising.csv', usecols=[1,2,3,4])
</code></p>

<h3 id="section-10">17. 读取数据的时候，就设置空值的表示方法</h3>

<p><code>py
auto = pd.read_csv('Data/Auto.csv', na_values='?').dropna()
</code></p>

<h3 id="pandasdf">18. 构造pandas的df</h3>

<p><code>py
X = np.random.normal(size = 100) 
y = np.random.permutation(X) 
data = pd.DataFrame({'X':X,'y':y})
</code></p>

<h3 id="section-11">19. 读取文本文件的时候，设置某列为索引列</h3>

<p><code>py
data = pd.read_csv('../data/Smarket.csv',index_col=0)
</code></p>

<h3 id="section-12">20. 原地替换</h3>

<p><code>py
df_x.replace(to_replace={0:'No', 1:'Yes', 'True':'Yes', 'False':'No'}, inplace=True)
</code></p>

<h2 id="section-13">参考链接</h2>

<ul>
  <li>
    <p><a href="https://blog.csdn.net/jingyi130705008/article/details/78162758">pandas中关于set_index和reset_index的用法</a></p>
  </li>
  <li>
    <p><a href="https://stackoverflow.com/questions/39283339/what-is-the-meaning-of-axis-attribute-in-a-pandas-dataframe">What is the meaning of “axis” attribute in a Pandas DataFrame?</a></p>
  </li>
</ul>
]]></content>
  </entry>
  
</feed>
